<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Todo List</title>
    <link rel="stylesheet" href="styles.css" />

    <script src="../node_modules/xel/xel.js" type="module"></script>
    <meta name="xel-theme" content="../node_modules/xel/themes/fluent.css">
    <meta name="xel-accent-color" content="#ae8fbb">
    <meta name="xel-icons" content="../node_modules/xel/icons/material.svg">
</head>
<body>
    <div id="app">
        <header>
        </header>

        <main>
            <section class="add-task">
                <x-input id="taskTitle" class="task-title" size="small">
                    <x-label>Task Title</x-label>
                </x-input>
                <x-select size="small" id="taskPriority" class="task-priority">
                    <x-menu>
                        <x-menuitem value="low" toggled>
                        <x-label>Low</x-label>
                        </x-menuitem>

                        <x-menuitem value="medium">
                        <x-label>Medium</x-label>
                        </x-menuitem>

                        <x-menuitem value="high">
                        <x-label>High</x-label>
                        </x-menuitem>
                    </x-menu>
                </x-select>
                <x-select size="small" id="taskStatus" class="task-status">
                    <x-menu>
                        <x-menuitem value="todo" toggled>
                            <x-label>To Do</x-label>
                        </x-menuitem>
                        <x-menuitem value="in-progress">
                            <x-label>In Progress</x-label>
                        </x-menuitem>
                        <x-menuitem value="done">
                            <x-label>Done</x-label>
                        </x-menuitem>
                    </x-menu>
                </x-select>
                <x-input type="datetime-local" id="dueDate" class="due-date" size="small" class="calendar">
                </x-input>
                <x-switch id="repeatTask" class="repeat-task">
                    <x-label><strong>Repeat?</strong></x-label>
                </x-switch>
                <x-button id="addTaskBtn" class="btn-add-task" size="small">
                    <x-label>Add Task</x-label>
                </x-button>
            </section>

            <div class="divider" title="Click to expand add task"><hr /></div>

            <section class="tasks">
                <div class="filters">
                    <x-input  class="search-bar" id="search" size="small">
                        <x-icon href="#search"></x-icon>
                        <x-label>Search tasks...</x-label>
                    </x-input>
                    <x-select size="small" id="filterPriority" class="filter-priority">
                        <x-menu>
                            <x-menuitem value="" disabled toggled>
                            <x-label>Priority</x-label>
                            </x-menuitem>

                            <x-menuitem value="all">
                            <x-label>All</x-label>
                            </x-menuitem>

                            <x-menuitem value="low">
                            <x-label>Low</x-label>
                            </x-menuitem>

                            <x-menuitem value="medium">
                            <x-label>Medium</x-label>
                            </x-menuitem>

                            <x-menuitem value="high">
                            <x-label>High</x-label>
                            </x-menuitem>
                        </x-menu>
                    </x-select>
                    <x-select size="small" id="filterStatus" class="filter-status">
                        <x-menu>
                            <x-menuitem value="" disabled toggled>
                                <x-label>Status</x-label>
                            </x-menuitem>
                            <x-menuitem value="all">
                                <x-label>All</x-label>
                            </x-menuitem>
                            <x-menuitem value="todo">
                                <x-label>To Do</x-label>
                            </x-menuitem>
                            <x-menuitem value="in-progress">
                                <x-label>In Progress</x-label>
                            </x-menuitem>
                            <x-menuitem value="completed">
                                <x-label>Done</x-label>
                            </x-menuitem>
                        </x-menu>
                    </x-select>
                </div>
                
                <ul id="taskList" class="task-list"></ul>
            </section>
        </main>

        <footer>
            <small id="quote-text">Loading quote...</small>
            <div id="quote-author"></div>
        </footer>
    </div>

    <x-notification id="notification" timeout="2500"></x-notification>
    
    <script src="renderer.js"></script>
    <script>
        async function fetchQuote() {
            try {
                const response = await fetch('http://api.quotable.io/random?tags=productivity|motivation|inspiration|success|failure|discipline|focus|perseverance|timemanagement|leadership|teamwork|creativity|responsibility|achievement|resilience|mindset|growth|ambition|purpose|hardwork|determination|efficiency|balance|wisdom|goals|learning|selfimprovement|opportunity|challenges|courage|progress|habits|positivity|effort');
                const data = await response.json();
                document.getElementById('quote-text').textContent = `"${data.content}"`;
                document.getElementById('quote-author').textContent = `— ${data.author}`;
            } catch (error) {
                document.getElementById('quote-text').textContent = '"The best way to get started is to quit talking and begin doing."';
                document.getElementById('quote-author').textContent = '— Walt Disney';
            }
        }

        // Load quote when page loads
        fetchQuote();
        
        // Optional: Refresh quote every 10 minutes
        setInterval(fetchQuote, 600000);
    </script>

    <script>
        const addTaskDivider = document.querySelector('.divider');
        addTaskDivider.addEventListener('click', () => {
            const addTaskSection = document.querySelector('.add-task');
            addTaskSection.classList.toggle('expanded');
            addTaskSection.scrollIntoView({ behavior: 'smooth' });
            addTaskSection.focus();

            if (addTaskSection.classList.contains('expanded')) {
                addTaskDivider.title = 'Click to collapse add task';
                addTaskDivider.classList.add('expanded');
                addTaskSection.scrollIntoView({ behavior: 'smooth' });
                addTaskSection.focus();
                document.getElementById('taskTitle').focus();
                
            } else {
                addTaskDivider.title = 'Click to expand add task';
                addTaskDivider.classList.remove('expanded');
                document.getElementById('taskTitle').blur();
            }
        });
    </script>
</body>
</html>